<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Autoplay / pause media - fullPage.js</title>
    <meta name="author" content="Alvaro Trigo Lopez" />
    <meta name="description" content="fullPage full-screen autoplay videos and audio." />
    <meta name="keywords"  content="fullpage,jquery,demo,autoplay,video,audio,html5,paluse" />
    <meta name="Resource-type" content="Document" />
    <link rel="stylesheet" type="text/css" href="../jquery.fullPage.css" />
    <link rel="stylesheet" type="text/css" href="examples.css" />
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
    .intro p{
        color: #fff;
    }
    * { box-sizing: border-box; }
.video-background {
  /* background: #000; */
  /* position: fixed; */
  top: 0; right: 0; bottom: 0; left: 0;
  z-index: -99;
  height: 100vh;
}
.video-foreground,
.video-background iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}
    </style>

    <!--[if IE]>
        <script type="text/javascript">
             var console = { log: function() {} };
        </script>
    <![endif]-->
</head>
<body>
<div id="fullpage">
    <div class="section intro">
      <div class="video-background">
        <div class="video-foreground">
          <div id="player1"></div>
        </div>
      </div>      
    </div>
    <div class="section">
      <div class="video-background">
        <div class="video-foreground">
          <div id="player2"></div>
        </div>
      </div>      
    </div>
    <div class="section">
      <div class="video-background">
        <div class="video-foreground">
          <div id="player3"></div>
        </div>
      </div>      
    </div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>

<script type="text/javascript" src="../jquery.fullPage.js"></script>
<script type="text/javascript" src="examples.js"></script>


<script>
  var p;
  var player;
  var mangit_player = {
    stop: function(){
      player.destroy();
    },
    play: function(){
      
    },
    pause: function(){
      player.pauseVideo()
    },
    init:function(targetId, videoId){
      player = new YT.Player(targetId, {
          height: '390',
          width: '640',
          videoId: videoId,
          playerVars: {
            'autoplay': 1,
            'controls': 0
          },
          events: {
            'onReady': function(event){
            // alert('Player Ready')
            event.target.playVideo();
          }
        }
      });
    }
  }
  function onYouTubeIframeAPIReady() {
  $('#fullpage').fullpage({
    afterLoad: function(index, nextIndex, direction){
      
      var player_id = 'player'+ nextIndex
      mangit_player.init(player_id, 'kleszteUn6w')
    }, 
    onSlideLeave: function(index, nextIndex, direction){
      mangit_player.stop()
    }
  });
}
// function onPlayerReady(event) {
//   event.target.setVolume(100);
//   event.target.playVideo();
// }
  // var player;
  // var is_ready = false;
  // function onYouTubeIframeAPIReady() {
  //   is_ready=true;
  //   $('#fullpage').fullpage({
  //       afterLoad: function(index, nextIndex, direction){
  //         // alert(nextIndex)
  //         var player_id = 'player'+nextIndex;
  //         // alert(typeof player_id)
  //         if(is_ready){
  //           playYtVideo(player_id, 'kleszteUn6w');
  //           console.log(player_id)
  //         }
  //       },
  //       onLeave: function(index, nextIndex, direction){
  //         destroyVideo()
  //         alert('')
  //       }
  //         // sectionsColor: ['#C63D0F', '#1BBC9B', '#7E8F7C'],
  //         // anchors: ['firstPage', 'secondPage', '3rdPage']
  //     });
  // }
  // function playYtVideo(targetId, videoId){    
  //   var player = new YT.Player(targetId, {
  //     height: '390',
  //     width: '640',
  //     videoId: videoId,
  //     playerVars: {
  //       'autoplay': 1, 
  //       'controls': 0
  //     },
  //     events: {
  //       'onReady': function(event){
  //         alert('Player Ready')
  //         event.target.playVideo();
  //       }
  //     }
  //   });
  //   function destroyVideo() {
  //     player.destroy();
  //   }
  //   // function onPlayerStateChange(event) {
  //   //   if (event.data == YT.PlayerState.PLAYING) {
  //   //     player.destroy();
  //   //   }
  //   // }
  //   function stopVideo() {
  //     player.destroy();
  //   }
  // }

 



</script>
<script type="text/javascript">
  $(document).ready(function() {
    
  });
</script>

</body>
</html>